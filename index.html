<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTORRA CARS | Venta de Autom√≥viles Nuevos y Usados en Cartagena</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Encuentra los mejores veh√≠culos nuevos y usados en Cartagena. ALTORRA CARS ofrece SUVs, sedanes, pickups y hatchbacks de las mejores marcas con financiaci√≥n y garant√≠a.">
    <meta name="keywords" content="carros en Cartagena, veh√≠culos usados Cartagena, autos nuevos Colombia, SUV Cartagena, sedan Cartagena, pickup Cartagena, financiaci√≥n veh√≠culos, compra autos Cartagena, Chevrolet, Renault, Nissan, Kia, Mazda, Toyota">
    <meta name="author" content="ALTORRA Company SAS">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Spanish">
    <meta name="geo.region" content="CO-BOL">
    <meta name="geo.placename" content="Cartagena">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://altorracars.github.io/">
    <meta property="og:title" content="ALTORRA CARS - Veh√≠culos Nuevos y Usados en Cartagena">
    <meta property="og:description" content="Encuentra los mejores veh√≠culos nuevos y usados en Cartagena. SUVs, sedanes, pickups y hatchbacks con financiaci√≥n y garant√≠a.">
    <meta property="og:image" content="https://altorracars.github.io/multimedia/logo-placeholder.png">
    <meta property="og:site_name" content="ALTORRA CARS">
    <meta property="og:locale" content="es_CO">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://altorracars.github.io/">
    <meta name="twitter:title" content="ALTORRA CARS - Veh√≠culos Nuevos y Usados en Cartagena">
    <meta name="twitter:description" content="Encuentra los mejores veh√≠culos nuevos y usados en Cartagena. SUVs, sedanes, pickups y hatchbacks con financiaci√≥n y garant√≠a.">
    <meta name="twitter:image" content="https://altorracars.github.io/multimedia/logo-placeholder.png">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://altorracars.github.io/">

    <!-- Additional SEO -->
    <meta name="theme-color" content="#b89658">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ALTORRA CARS">

    <!-- Structured Data - LocalBusiness Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "AutoDealer",
      "name": "ALTORRA CARS",
      "legalName": "ALTORRA Company SAS",
      "url": "https://altorracars.github.io",
      "logo": "https://altorracars.github.io/multimedia/logo-placeholder.png",
      "description": "Concesionario de veh√≠culos nuevos y usados en Cartagena, Colombia. Ofertas en SUVs, sedanes, pickups y hatchbacks con financiaci√≥n.",
      "telephone": "+573235016747",
      "email": "altorracarssale@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Cartagena",
        "addressRegion": "Bol√≠var",
        "addressCountry": "CO"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "10.3910485",
        "longitude": "-75.4794257"
      },
      "sameAs": [
        "https://wa.me/573235016747"
      ],
      "priceRange": "$$",
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "08:00",
          "closes": "18:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Saturday",
          "opens": "09:00",
          "closes": "14:00"
        }
      ]
    }
    </script>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile-fixes.css">
    <link rel="stylesheet" href="css/featured-fixes.css">
    <link rel="stylesheet" href="css/vehicles-cards-fix.css">
<link rel="stylesheet" href="css/sidebar-filters-fix.css">
    <link rel="stylesheet" href="css/favorites-fix.css">
    <link rel="stylesheet" href="css/footer-fixes.css">
    <link rel="stylesheet" href="css/brands-fixes.css">
    <link rel="stylesheet" href="css/toast-notifications.css">
    <link rel="stylesheet" href="css/contact-forms.css">
    <link rel="stylesheet" href="css/dark-theme.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header Component -->
    <div id="header-placeholder"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">TU AUTO IDEAL TE ESPERA EN CARTAGENA</h1>
            <p class="hero-subtitle">NUEVOS Y USADOS ‚Ä¢ TODAS LAS MARCAS ‚Ä¢ FINANCIACI√ìN DISPONIBLE</p>

            <!-- Quick Action Buttons -->
            <div class="hero-buttons">
                <a href="vehiculos-usados.html" class="btn-hero btn-primary">VER USADOS</a>
                <a href="vehiculos-nuevos.html" class="btn-hero btn-secondary">VER NUEVOS</a>
                <a href="busqueda.html" class="btn-hero btn-outline">B√öSQUEDA AVANZADA</a>
            </div>
        </div>
    </section>

  <!-- Featured Vehicles Section - Carrusel Destacados -->
<section class="featured-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Veh√≠culos <span class="highlight">Destacados</span></h2>
      <a href="busqueda.html" class="btn-view-more">Ver todos ‚Üí</a>
    </div>

    <div class="carousel-wrapper">
      <!-- Flechas del carrusel -->
      <button class="carousel-arrow prev" type="button" aria-label="Anterior" onclick="scrollCarouselById('featuredVehicles', -1)">‚Äπ</button>
      <button class="carousel-arrow next" type="button" aria-label="Siguiente" onclick="scrollCarouselById('featuredVehicles', 1)">‚Ä∫</button>

      <div class="vehicles-grid" id="featuredVehicles">
        <!-- Vehicles will be loaded dynamically -->
      </div>
    </div>
    <p class="carousel-hint">üëâ Desliza para ver m√°s</p>
  </div>
</section>

    <!-- Carrusel Veh√≠culos Usados -->
    <section class="featured-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Veh√≠culos <span class="highlight">Usados</span></h2>
                <a href="vehiculos-usados.html" class="btn-view-more">Ver todos ‚Üí</a>
            </div>

            <div class="carousel-wrapper">
                <!-- Flechas del carrusel -->
                <button class="carousel-arrow prev" type="button" aria-label="Anterior" onclick="scrollCarouselById('usedVehiclesCarousel', -1)">‚Äπ</button>
                <button class="carousel-arrow next" type="button" aria-label="Siguiente" onclick="scrollCarouselById('usedVehiclesCarousel', 1)">‚Ä∫</button>

                <div class="vehicles-grid" id="usedVehiclesCarousel">
                    <!-- Vehicles will be loaded dynamically -->
                </div>
            </div>
            <p class="carousel-hint">üëâ Desliza para ver m√°s</p>
        </div>
    </section>

    <!-- Carrusel Veh√≠culos Nuevos -->
    <section class="featured-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Veh√≠culos <span class="highlight">Nuevos</span></h2>
                <a href="vehiculos-nuevos.html" class="btn-view-more">Ver todos ‚Üí</a>
            </div>

            <div class="carousel-wrapper">
                <!-- Flechas del carrusel -->
                <button class="carousel-arrow prev" type="button" aria-label="Anterior" onclick="scrollCarouselById('newVehiclesCarousel', -1)">‚Äπ</button>
                <button class="carousel-arrow next" type="button" aria-label="Siguiente" onclick="scrollCarouselById('newVehiclesCarousel', 1)">‚Ä∫</button>

                <div class="vehicles-grid" id="newVehiclesCarousel">
                    <!-- Vehicles will be loaded dynamically -->
                </div>
            </div>
            <p class="carousel-hint">üëâ Desliza para ver m√°s</p>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title">Busca por <span class="highlight">Categor√≠a</span></h2>
            <div class="categories-grid">
                <a href="vehiculos-suv.html" class="category-card">
                    <div class="category-image">
                        <img src="multimedia/categories/suv.jpg" alt="SUV / Crossover" loading="lazy">
                    </div>
                    <h3 class="category-name">SUV / Crossover</h3>
                </a>

                <a href="vehiculos-pickup.html" class="category-card">
                    <div class="category-image">
                        <img src="multimedia/categories/camioneta.jpg" alt="Pickup" loading="lazy">
                    </div>
                    <h3 class="category-name">Pickup</h3>
                </a>

                <a href="vehiculos-sedan.html" class="category-card">
                    <div class="category-image">
                        <img src="multimedia/categories/sedan.jpg" alt="Sed√°n" loading="lazy">
                    </div>
                    <h3 class="category-name">Sed√°n</h3>
                </a>

                <a href="vehiculos-hatchback.html" class="category-card">
                    <div class="category-image">
                        <img src="multimedia/categories/hatchback.jpg" alt="Hatchback / Compacto" loading="lazy">
                    </div>
                    <h3 class="category-name">Hatchback / Compacto</h3>
                </a>
            </div>
        </div>
    </section>

    <!-- Popular Brands Section - FASE 2: Con logos din√°micos -->
    <section class="brands-section">
        <div class="container">
            <h2 class="section-title">Marcas <span class="highlight">Populares</span></h2>
            <div class="brands-grid" id="popularBrands">
                <!-- Brands will be loaded dynamically -->
            </div>
            <div class="text-center mt-3">
                <a href="busqueda.html" class="btn-view-more">Ver todas las marcas ‚Üí</a>
            </div>
        </div>
    </section>

    <!-- Commercial Section - Compra / Vende / Financia -->
    <section class="commercial-section">
        <div class="container">
            <div class="commercial-header">
                <h2 class="commercial-title">Todo en un <span class="highlight">Solo Lugar</span></h2>
                <p class="commercial-subtitle">Soluciones integrales para tu movilidad en Cartagena</p>
            </div>

            <!-- Servicios Comerciales -->
            <div class="commercial-grid">
                <div class="commercial-card">
                    <div class="commercial-icon">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40" cy="40" r="38" stroke="#b89658" stroke-width="2" fill="rgba(184, 150, 88, 0.1)"/>
                            <path d="M40 15L50 25H30L40 15Z" fill="#d4af37"/>
                            <rect x="25" y="25" width="30" height="35" rx="2" fill="#b89658"/>
                            <path d="M30 30H50M30 35H50M30 40H50M30 45H50" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            <circle cx="35" cy="52" r="4" fill="white"/>
                            <circle cx="45" cy="52" r="4" fill="white"/>
                            <rect x="20" y="50" width="40" height="8" rx="2" fill="#8b6f47"/>
                        </svg>
                    </div>
                    <h3 class="commercial-card-title">Compra tu Auto</h3>
                    <p class="commercial-card-text">Encuentra el veh√≠culo perfecto entre nuestra amplia selecci√≥n certificada y garantizada.</p>
                    <a href="busqueda.html" class="btn-commercial">VER INVENTARIO</a>
                </div>
                <div class="commercial-card">
                    <div class="commercial-icon">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40" cy="40" r="38" stroke="#b89658" stroke-width="2" fill="rgba(184, 150, 88, 0.1)"/>
                            <path d="M25 35C25 32 27 30 30 30H50C53 30 55 32 55 35V45C55 48 53 50 50 50H30C27 50 25 48 25 45V35Z" fill="#d4af37"/>
                            <circle cx="35" cy="40" r="6" stroke="#b89658" stroke-width="2" fill="white"/>
                            <circle cx="45" cy="40" r="6" stroke="#b89658" stroke-width="2" fill="white"/>
                            <path d="M30 50V55H50V50" stroke="#8b6f47" stroke-width="2"/>
                            <path d="M40 25V30" stroke="#d4af37" stroke-width="3" stroke-linecap="round"/>
                            <text x="40" y="43" text-anchor="middle" fill="#b89658" font-size="12" font-weight="bold">$$$</text>
                        </svg>
                    </div>
                    <h3 class="commercial-card-title">Vende tu Auto</h3>
                    <p class="commercial-card-text">Recibe la mejor oferta del mercado. Aval√∫o r√°pido, transparente y seguro.</p>
                    <button type="button" class="btn-commercial" data-modal="vende-auto">COTIZAR AHORA</button>
                </div>
                <div class="commercial-card">
                    <div class="commercial-icon">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="40" cy="40" r="38" stroke="#b89658" stroke-width="2" fill="rgba(184, 150, 88, 0.1)"/>
                            <rect x="30" y="25" width="20" height="28" rx="2" fill="#d4af37"/>
                            <rect x="32" y="28" width="16" height="10" fill="white" opacity="0.3"/>
                            <circle cx="40" cy="45" r="3" fill="white"/>
                            <path d="M25 38H30M50 38H55M25 42H30M50 42H55M25 46H30M50 46H55" stroke="#b89658" stroke-width="2" stroke-linecap="round"/>
                            <path d="M40 48V52" stroke="white" stroke-width="2"/>
                        </svg>
                    </div>
                    <h3 class="commercial-card-title">Financiaci√≥n</h3>
                    <p class="commercial-card-text">Contamos con aliados estrat√©gicos financieros para ofrecerte las mejores opciones de cr√©dito.</p>
                    <button type="button" class="btn-commercial" data-modal="financiacion">SOLICITAR INFO</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Component -->
    <div id="footer-placeholder"></div>

    <!-- Modal: Vende tu Auto -->
    <div class="modal-overlay" id="vende-auto-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Vende tu Auto</h2>
                <p class="modal-subtitle">Recibe la mejor oferta del mercado</p>
                <button type="button" class="modal-close" aria-label="Cerrar">&times;</button>
            </div>
            <div class="modal-body">
                <form id="vendeAutoForm">
                    <div class="form-group">
                        <label class="form-label required">Nombre completo</label>
                        <input type="text" name="nombre" class="form-input" required placeholder="Ej: Juan P√©rez">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Tel√©fono</label>
                            <input type="tel" name="telefono" class="form-input" required placeholder="Ej: 3001234567">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Email</label>
                            <input type="email" name="email" class="form-input" required placeholder="Ej: correo@ejemplo.com">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Marca</label>
                            <input type="text" name="marca" class="form-input" required placeholder="Ej: Chevrolet">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Modelo</label>
                            <input type="text" name="modelo" class="form-input" required placeholder="Ej: Spark GT">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">A√±o</label>
                            <input type="number" name="year" class="form-input" required placeholder="Ej: 2020" min="1990" max="2025">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Kilometraje</label>
                            <input type="number" name="kilometraje" class="form-input" required placeholder="Ej: 50000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Precio esperado</label>
                        <input type="text" name="precio" class="form-input" required placeholder="Ej: $35,000,000">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Comentarios adicionales</label>
                        <textarea name="comentarios" class="form-textarea" placeholder="Cu√©ntanos m√°s sobre tu veh√≠culo..."></textarea>
                    </div>

                    <button type="submit" class="form-submit">
                        <svg class="whatsapp-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        Enviar por WhatsApp
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Financiaci√≥n -->
    <div class="modal-overlay" id="financiacion-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Solicitud de Financiaci√≥n</h2>
                <p class="modal-subtitle">Te ayudamos a conseguir el mejor cr√©dito</p>
                <button type="button" class="modal-close" aria-label="Cerrar">&times;</button>
            </div>
            <div class="modal-body">
                <form id="financiacionForm">
                    <div class="form-group">
                        <label class="form-label required">Nombre completo</label>
                        <input type="text" name="nombre" class="form-input" required placeholder="Ej: Juan P√©rez">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Tel√©fono</label>
                            <input type="tel" name="telefono" class="form-input" required placeholder="Ej: 3001234567">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Email</label>
                            <input type="email" name="email" class="form-input" required placeholder="Ej: correo@ejemplo.com">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Veh√≠culo de inter√©s</label>
                        <input type="text" name="vehiculo-interes" class="form-input" required placeholder="Ej: Chevrolet Spark GT 2020">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Precio del veh√≠culo</label>
                            <input type="text" name="precio-vehiculo" class="form-input" required placeholder="Ej: $35,000,000">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Cuota inicial disponible</label>
                            <input type="text" name="cuota-inicial" class="form-input" required placeholder="Ej: $10,000,000">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">Plazo deseado</label>
                            <select name="plazo" class="form-select" required>
                                <option value="">Seleccionar...</option>
                                <option value="12 meses">12 meses</option>
                                <option value="24 meses">24 meses</option>
                                <option value="36 meses">36 meses</option>
                                <option value="48 meses">48 meses</option>
                                <option value="60 meses">60 meses</option>
                                <option value="72 meses">72 meses</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Ingresos mensuales</label>
                            <input type="text" name="ingresos" class="form-input" required placeholder="Ej: $3,000,000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Comentarios adicionales</label>
                        <textarea name="comentarios" class="form-textarea" placeholder="Cu√©ntanos m√°s sobre tu solicitud..."></textarea>
                    </div>

                    <button type="submit" class="form-submit">
                        <svg class="whatsapp-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                        Enviar por WhatsApp
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/favorites-manager.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/contact-forms.js"></script>
    <script src="js/components.js"></script>
    <script src="js/database.js"></script>
    <script src="js/render.js"></script>
    <script src="js/main.js"></script>
    <script>
        // FASE 2: Load featured vehicles with advanced ranking
        async function loadFeatured() {
            showLoading('featuredVehicles');
            await vehicleDB.load();
            // CORREGIDO: Filtrar primero por destacados, luego rankear
            const featured = vehicleDB.getFeatured();
            // Rankear los destacados por oferta, tipo, a√±o, km
            const rankedFeatured = featured.map(v => ({
                ...v,
                _score: vehicleDB.calculateRankingScore(v)
            })).sort((a, b) => b._score - a._score);
            const cleanFeatured = rankedFeatured.map(({ _score, ...v }) => v);
            renderVehicles(cleanFeatured.slice(0, 12), 'featuredVehicles');
        }

        // FASE 2: Load popular brands dynamically (real by inventory count)
        async function loadPopularBrands() {
            await vehicleDB.load();
            const allVehicles = vehicleDB.getAllVehicles();

            // Count vehicles by brand
            const brandCounts = {};
            allVehicles.forEach(v => {
                const brandKey = v.marca.toLowerCase();
                brandCounts[brandKey] = (brandCounts[brandKey] || 0) + 1;
            });

            // Get all brands and sort by vehicle count
            const brands = vehicleDB.getAllBrands();
            const popularBrands = brands
                .filter(brand => brandCounts[brand.id] > 0) // Only brands with vehicles
                .map(brand => ({
                    ...brand,
                    count: brandCounts[brand.id]
                }))
                .sort((a, b) => b.count - a.count) // Sort by count descending
                .slice(0, 8); // Top 8 (4 arriba, 4 abajo en PC)

            const container = document.getElementById('popularBrands');

            if (container) {
                const html = popularBrands.map(brand => `
                    <a href="marca.html?marca=${brand.id}" class="brand-card">
                        <img src="${brand.logo}" alt="${brand.nombre}" class="brand-logo"
                             onerror="this.style.display='none'">
                        <div class="brand-name">${brand.nombre}</div>
                    </a>
                `).join('');

                container.innerHTML = html;
            }
        }

        // FASE 2: Load new vehicles with ranking (year desc - newest first)
        async function loadNewVehicles() {
            showLoading('newVehiclesCarousel');
            await vehicleDB.load();
            const newVehicles = vehicleDB.filter({ tipo: 'nuevo' });

            // Sort: destacado > oferta > year (desc)
            const sortedNew = newVehicles.sort((a, b) => {
                // Destacados first
                if (a.destacado && !b.destacado) return -1;
                if (!a.destacado && b.destacado) return 1;

                // Ofertas second
                if (a.oferta && !b.oferta) return -1;
                if (!a.oferta && b.oferta) return 1;

                // Then by year (newest first)
                return b.year - a.year;
            });

            renderVehicles(sortedNew.slice(0, 12), 'newVehiclesCarousel');
        }

        // FASE 2: Load used vehicles with ranking (year desc, then km asc)
        async function loadUsedVehicles() {
            showLoading('usedVehiclesCarousel');
            await vehicleDB.load();
            const used = vehicleDB.filter({ tipo: 'usado' });

            // Sort: destacado > oferta > year (desc) > km (asc - less is better)
            const sortedUsed = used.sort((a, b) => {
                // Destacados first
                if (a.destacado && !b.destacado) return -1;
                if (!a.destacado && b.destacado) return 1;

                // Ofertas second
                if (a.oferta && !b.oferta) return -1;
                if (!a.oferta && b.oferta) return 1;

                // Then by year (newest first)
                if (b.year !== a.year) return b.year - a.year;

                // Finally by km (less km is better)
                return a.kilometraje - b.kilometraje;
            });

            renderVehicles(sortedUsed.slice(0, 12), 'usedVehiclesCarousel');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            loadFeatured();
            loadPopularBrands();
            loadUsedVehicles();
            loadNewVehicles();
        });
    </script>
    <script>
// Funci√≥n unificada para scroll de carruseles
function scrollCarouselById(containerId, direction) {
    const grid = document.getElementById(containerId);
    if (!grid) {
        console.error('Carousel not found:', containerId);
        return;
    }

    // Calcular ancho de scroll basado en las tarjetas visibles
    const cardWidth = 350; // Ancho aprox de cada tarjeta + gap
    const scrollAmount = cardWidth * 3; // Scroll de 3 tarjetas a la vez

    grid.scrollBy({
        left: direction * scrollAmount,
        behavior: 'smooth'
    });
}

// Mejorar scroll t√°ctil en m√≥vil para carruseles
function enableTouchScroll() {
    const carousels = document.querySelectorAll('.vehicles-grid');

    carousels.forEach(carousel => {
        let startX = 0;
        let scrollLeft = 0;
        let isScrolling = false;

        // Prevenir interferencias en m√≥vil
        carousel.style.cursor = 'default';

        // No interferir con el scroll nativo, solo asegurar que funcione
        carousel.addEventListener('touchstart', (e) => {
            isScrolling = true;
            startX = e.touches[0].pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
        }, { passive: true });

        carousel.addEventListener('touchend', () => {
            isScrolling = false;
        }, { passive: true });
    });
}

// Inicializar mejoras t√°ctiles cuando cargue la p√°gina
document.addEventListener('DOMContentLoaded', () => {
    enableTouchScroll();
});
</script>
</body>
</html>
